# EBS 볼륨 증가 후 빌드 관련 질문

## 1. EBS 볼륨 증가 후 바로 빌드 가능한가?

**✅ 네, 바로 가능합니다!**

### 순서:
1. AWS Console에서 볼륨 크기 증가 (30GB 또는 50GB)
2. EC2에서 파일 시스템 확장 실행
3. `df -h /` 명령으로 확인 (30GB/50GB로 표시되어야 함)
4. **바로 Jenkins 빌드 실행 가능!**

### 다운타임 없음:
- 인스턴스 재시작 불필요
- Jenkins 서비스 중단 불필요
- 바로 빌드 가능

## 2. ArgoCD가 없는데 Update Manifest 단계는?

**⚠️ 좋은 지적입니다!** 

현재 Jenkinsfile의 "Update Manifest" 단계는:
- 매니페스트 파일을 Git에 업데이트하고 푸시함
- ArgoCD가 없으면 **Git 푸시만 하고 끝**
- 실제 Kubernetes 배포는 발생하지 않음

### 문제점:

1. **파일이 존재하지 않으면?**
   - `sed` 명령이 실패할 수 있음
   - 하지만 `if [ -f "${rolloutPath}" ]` 체크가 있어서 괜찮음

2. **ArgoCD가 없으면?**
   - Git에 푸시만 하고 끝
   - 실제 배포는 안 됨
   - 하지만 **오류는 발생하지 않음** (Git 푸시는 성공)

### 해결 방법:

**옵션 1: Update Manifest 단계 스킵 (임시)**
- ArgoCD 설정 전까지는 이 단계를 건너뛰기
- Jenkinsfile에서 조건부로 처리

**옵션 2: 그대로 두기**
- Git에 푸시만 하고 끝
- 나중에 ArgoCD 설정하면 자동으로 감지되어 배포됨
- 오류는 발생하지 않음

**옵션 3: ArgoCD 설정 후 사용**
- ArgoCD를 먼저 설정
- 그 다음 빌드하면 자동 배포까지 완료

## 권장사항

### 현재 상황에서:
1. **EBS 볼륨 증가** → 파일 시스템 확장 → **바로 빌드 가능**
2. **Update Manifest 단계**는 그대로 두어도 됨
   - 파일이 없으면 자동으로 스킵됨 (`if [ -f ... ]` 체크)
   - Git 푸시는 성공 (배포만 안 됨)
   - 나중에 ArgoCD 설정하면 자동으로 작동

### 나중에 ArgoCD 설정 시:
- Update Manifest 단계가 이미 있으므로 별도 수정 불필요
- ArgoCD가 Git 변경사항을 감지하여 자동 배포

