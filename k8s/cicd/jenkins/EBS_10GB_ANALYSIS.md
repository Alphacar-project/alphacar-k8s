# EBS 10GB 용량 분석

## 10GB는 부족할 수 있습니다

### 일반적인 디스크 사용량 (Docker 빌드 환경)

#### 1. 시스템 기본 사용량
- Ubuntu 기본 설치: ~2-3GB
- 시스템 파일, 로그 등: ~1GB
- **합계: 약 3-4GB**

#### 2. Docker 관련
- Docker 엔진 설치: ~500MB
- 베이스 이미지 (node:20-alpine): ~100-200MB
- 빌드 중간 레이어들: ~500MB-1GB
- 빌드 캐시: **1-3GB 이상** (매우 큼!)
- 여러 빌드 이미지 누적: **2-5GB 이상**
- **합계: 약 4-10GB** (쌓이면 더 많이!)

#### 3. Jenkins 관련
- Jenkins 설치: ~500MB-1GB
- Jenkins 워크스페이스 (소스 코드): ~500MB-1GB
- Jenkins 빌드 히스토리: ~500MB-2GB
- **합계: 약 1.5-4GB**

#### 4. 기타
- 로그 파일
- 임시 파일
- 패키지 캐시 등

## 예상 총 사용량

**최소**: 3GB (시스템) + 4GB (Docker) + 1.5GB (Jenkins) = **8.5GB**  
**일반**: 4GB + 7GB + 3GB = **14GB**  
**최대**: 5GB + 10GB + 4GB = **19GB**

## 결론

**10GB는 부족합니다!** 특히:
- ✅ 빌드를 몇 번 실행하면 쉽게 꽉 참
- ✅ 빌드 캐시가 쌓이면 더 빠르게 부족해짐
- ✅ 여러 서비스 빌드를 병렬로 하면 더 빠름

## 권장 사항

### 즉시 해결 (Docker 정리)
```bash
docker system prune -a --volumes -f
```

### 중기 해결 (볼륨 크기 증가) - **강력 권장**
- **최소 30GB** 권장
- **권장 50GB** 이상
- 이유:
  - 빌드 캐시 여유 공간 확보
  - 여러 빌드 병렬 실행 가능
  - 향후 확장 고려

### 장기 해결 (자동 정리)
- ✅ Jenkinsfile에 빌드 전/후 정리 로직 추가됨
- Jenkins 빌드 히스토리 자동 삭제 설정
- 주기적 Docker 정리 스크립트 (cron job)

## 비용 고려

- EBS gp3 10GB → 30GB: 약 **$2-3/월 추가**
- EBS gp3 10GB → 50GB: 약 **$4-5/월 추가**
- **비용 대비 효과 매우 큼!** (빌드 실패로 인한 시간 손실 방지)

